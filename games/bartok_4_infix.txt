Name: Bartok
Turn-based: yes

Number of players: 4
Player hand size: 5
Player collections: 1
Player1
Player2
Player3
Player4

Number of piles: 2
discard:
    facedown: no
    size: 1
    owner: all
draw:
    facedown: yes
    size: 31
    owner: all

Number of rules: 3
validDiscard:
    expr: (card.rank = discard.rank) or (card.suit = discard.suit)
hasValidMove:
    expr: Fn.rules.validDiscard move.end 
validDraw:
    expr: not Fn.rules.hasValidMove

Number of moves: 8
q:
    where: all
    from: Player1.hand
    to: discard
    when: q
    how: validDiscard
e:
    where: top
    from: draw
    to: Player1.hand
    when: e
    how: validDraw
i:
    where: all
    from: Player2.hand
    to: discard
    when: i
    how: validDiscard
p:
    where: top
    from: draw
    to: Player2.hand
    when: p
    how: validDraw
z:
    where: all
    from: Player3.hand
    to: discard
    when: z
    how: validDiscard
c:
    where: top
    from: draw
    to: Player3.hand
    when: c
    how: validDraw
b:
    where: all
    from: Player4.hand
    to: discard
    when: b
    how: validDiscard
m:
    where: top
    from: draw
    to: Player4.hand
    when: m
    how: validDraw

Number of events: 1
event0:
    trigger: (draw.size = 0) and (discard.size > 1)
    action: (Fn.draw.replenish discard) (Fn.shuffle draw.cards)

Win condition: (Player1.hand.size = 0) or (Player2.hand.size = 0) or (Player3.hand.size = 0) or (Player4.hand.size = 0)
