Name: Bartok
Turn-based: yes

Number of players: 2
p0: 
    name: Player1
    hand_size: 5
    collection_count: 1
p1:
    name: Player2
    hand_size: 5
    collection_count: 1

Number of piles: 2
pile1:
    name: discard
    facedown: no
    size: 1
    owner: all
pile0:
    name: draw
    facedown: yes
    size: 41
    owner: all

Number of rules: 3
rule0:
    name: validDiscard
    expr: (card.rank discard.rank =) (card.suit discard.suit =) or
rule1:
    name: hasValidMove
    expr: move.end rules.validDiscard
rule2:
    name: validDraw
    expr: rules.hasValidMove not

Number of moves: 4
move0:
    where: all
    from: Player1.hand
    to: discard
    when: q
    how: validDiscard
move1:
    where: top
    from: draw
    to: Player1.hand
    when: e
    how: validDraw
move2:
    where: all
    from: Player2.hand
    to: discard
    when: i
    how: validDiscard
move3:
    where: top
    from: draw
    to: Player2.hand
    when: p
    how: validDraw

Number of events: 1
event0:
    trigger: (draw.size 0 =) (discard.size 1 >) and
    action: discard draw.replenish draw.cards shuffle

Win condition: (Player1.hand.size 0 =) (Player2.hand.size 0 =) or